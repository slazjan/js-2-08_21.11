<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
    <script>
        //Передача данных
        //1 - биты 
        //2 - HTML - XML (XSD)
        //3 - String - JSON

        //JSON

        // 1) obj -> JSON
        // JSON.stringify (obj) => JSON
        // 2) JSON -> obj
        // JSON.parse (JSON) => obj

        // let obj = {
        //     a: 100,
        //     b: 'qwerty',
        //     c: [1, 2, 3],
        //     d: null,
        //     e: undefined,
        //     f: false
        // }

        // let objJSON = JSON.stringify (obj)

        // Асинхронные запросы
        // let a = 0 //1
        // let b
        // let c
        
        // setTimeout (() => {
        //     b = 2 //2 ???
        // }, 0)
         
        // let c = a + b //3

        // console.log (c) //2
        
        //1 ) Функции обратного вызова (callback)
        //2 ) Promises

        // callback

        // let a = 0 //1
        // let b
        // let c
        
        // function asynchronous (cb) {
        //     setTimeout (() => {
        //         b = 5
        //         cb()
        //     }, 0)
        // }
              
        // function callback () {
        //     c = a + b //3
        //     console.log (c) //2
        // }

        // asynchronous (callback)
        // // asynchronous (function () {
        // //     c = a + b //3
        // //     console.log (c) //2
        // //     someF (function () {
        // //         // ??
        // //         somesome (function () {

        // //         })
        // //     })
        // // })


        // Promises
        // let a = 5 //1
        // let b
        // let c
        
        // function asynchronous (cb) {
        //     setTimeout (() => {
        //         b = 5
        //         cb()
        //     }, 0)
        // }

        // function pootinFunction () {
        //     return new Promise ((res, rej) => { //res - resolve / rej - reject
        //         let b
        //         setTimeout(() => {
        //             b = +prompt ('Enter B')
        //             if (b != '') {
        //                 res (b)
        //             } else {
        //                 rej ('error')
        //             }
        //         }, 1000)
        //     })
        // }

        // pootinFunction()
        //     .then((data) => {
        //         c = a + data
        //         console.log (c)
        //     })
        //     .catch((err) => {
        //         console.log (err)
        //     })
        //     .finally(() => {
        //         console.log ('Promise ended')
        //     })

        // XMLHTTPREQUEST

        // function makeGETRequest(url, callback) {
        //     let xhr = new XMLHttpRequest()
        //     xhr.onreadystatechange = function () {
        //         if (xhr.readyState === 4) {
        //             callback(JSON.parse(xhr.responseText))
        //         }
        //     }
        //     xhr.open('GET', url, true) // REST api || CRUD api (Create Read Update Delete)
        //     xhr.send()
        // }

        // function cbFunction (data) {
        //     console.log (data)
        // }
        let url = 'https://jsonplaceholder.typicode.com/comments?postId=1'

        let urlErr = 'https://lol.org'
        // makeGETRequest (url ,cbFunction)


            // PROMISE REQUEST
        // function promiseRequest (url) {
        //     return new Promise ((resolve, reject) => {
        //         let xhr = new XMLHttpRequest()
        //         xhr.onreadystatechange = function () {
        //             if (xhr.readyState === 4) {
        //                 if (xhr.status == 200) {
        //                     resolve (xhr.responseText)
        //                 } else {
        //                     reject (xhr.status)
        //                 }
        //             }
        //         }
        //         xhr.open('GET', url, true) 
        //         xhr.send()
        //     })
        // }

        // promiseRequest (url)
        //     .then ((data) => {
        //         console.log (JSON.parse (data))
        //     })
        //     .catch ((errStatus) => {
        //         console.log (`Ошибка ${errStatus}`)
        //     })

        // FETCH

        function fetchRequest (url) {
            return fetch (url)
        }

        fetchRequest (urlErr) 
            .then (dataJSON => dataJSON.json())
            .then (data => {console.log (data)})
            .catch (err => {
                console.log (err)
            })
    </script>
</body>
</html>